<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.SplitPane?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.FlowPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<BorderPane prefHeight="720.0" prefWidth="1080.0" stylesheets="@../css/style.css"
    xmlns="http://javafx.com/javafx/21"
    xmlns:fx="http://javafx.com/fxml/1"
    fx:controller="famiglia.sapori.controller.SalaController">
    <top>
        <HBox alignment="CENTER_LEFT" spacing="20.0" styleClass="header-bar">
            <padding>
                <Insets bottom="15.0" left="20.0" right="20.0" top="15.0" />
            </padding>
            <Label styleClass="header-title" text="Sala Principale" />
            <HBox HBox.hgrow="ALWAYS" />
            <Label fx:id="userLabel" styleClass="user-label" text="Cameriere: Mario Rossi" />
            <Button fx:id="btnLogout" mnemonicParsing="false" onAction="#handleLogout" styleClass="logout-button" text="Logout" />
        </HBox>
    </top>

    <center>
        <SplitPane dividerPositions="0.4" styleClass="dark-split-pane">
            <VBox spacing="10.0" styleClass="panel-container">
                <padding>
                    <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
                </padding>
                <Label styleClass="section-title" text="Mappa Tavoli" />
                <ScrollPane fitToWidth="true" hbarPolicy="NEVER" styleClass="dark-scroll-pane, content-box" VBox.vgrow="ALWAYS">
                    <content>
                        <FlowPane fx:id="tavoliContainer" hgap="15.0" vgap="15.0" />
                    </content>
                </ScrollPane>
                <HBox alignment="CENTER" spacing="15.0">
                    <HBox alignment="CENTER" spacing="5.0">
                        <VBox prefHeight="15.0" prefWidth="15.0" styleClass="dot-free" />
                        <Label styleClass="legend-text" text="Libero" />
                    </HBox>
                    <HBox alignment="CENTER" spacing="5.0">
                        <VBox prefHeight="15.0" prefWidth="15.0" styleClass="dot-occupied" />
                        <Label styleClass="legend-text" text="Occupato" />
                    </HBox>
                </HBox>
            </VBox>

            <VBox spacing="15.0" styleClass="panel-container">
                <padding>
                    <Insets bottom="15.0" left="15.0" right="15.0" top="15.0" />
                </padding>
                <HBox alignment="CENTER_LEFT" spacing="10.0">
                    <Label styleClass="section-title" text="Nuova Comanda - " />
                    <Label fx:id="selectedTableLabel" styleClass="highlight-label" text="Nessun Tavolo Selezionato" />
                </HBox>

                <TabPane fx:id="menuTabPane" tabClosingPolicy="UNAVAILABLE" VBox.vgrow="ALWAYS">
                    <tabs>
                        <Tab text="Antipasti">
                            <ScrollPane fitToWidth="true" styleClass="dark-scroll-pane, content-box">
                                <content>
                                    <VBox fx:id="listAntipasti" spacing="10.0" styleClass="menu-list-container" />
                                </content>
                            </ScrollPane>
                        </Tab>
                        <Tab text="Primi">
                            <ScrollPane fitToWidth="true" styleClass="dark-scroll-pane, content-box">
                                <content>
                                    <VBox fx:id="listPrimi" spacing="10.0" styleClass="menu-list-container" />
                                </content>
                            </ScrollPane>
                        </Tab>
                        <Tab text="Secondi">
                            <ScrollPane fitToWidth="true" styleClass="dark-scroll-pane, content-box">
                                <content>
                                    <VBox fx:id="listSecondi" spacing="10.0" styleClass="menu-list-container" />
                                </content>
                            </ScrollPane>
                        </Tab>
                        <Tab text="Bevande">
                            <ScrollPane fitToWidth="true" styleClass="dark-scroll-pane, content-box">
                                <content>
                                    <VBox fx:id="listBevande" spacing="10.0" styleClass="menu-list-container" />
                                </content>
                            </ScrollPane>
                        </Tab>
                    </tabs>
                </TabPane>

                <VBox spacing="10.0" styleClass="summary-box">
                    <Label styleClass="field-label" text="NOTE CAMERIERE" />
                    <TextArea fx:id="txtNote" prefHeight="60.0" promptText="Eventuali intolleranze o richieste..." styleClass="input-field" style="-fx-text-fill: black;" wrapText="true"/>
                    <Label styleClass="field-label" text="RIEPILOGO ORDINE" />
                    <TextArea fx:id="txtRiepilogo" editable="false" prefHeight="150.0" promptText="Seleziona i piatti per vedere il riepilogo..." styleClass="receipt-area" wrapText="true">
                        <font>
                            <Font name="Monospaced Regular" size="12.0" />
                        </font>
                    </TextArea>
                    <HBox alignment="CENTER_RIGHT" spacing="20.0">
                        <Label fx:id="lblTotale" styleClass="total-label" text="TOTALE: â‚¬ 0.00" />
                        <Button fx:id="btnInvia" mnemonicParsing="false" onAction="#handleInviaComanda" styleClass="primary-button" text="INVIA IN CUCINA" />
                    </HBox>
                </VBox>

            </VBox>
        </SplitPane>
    </center>

</BorderPane>