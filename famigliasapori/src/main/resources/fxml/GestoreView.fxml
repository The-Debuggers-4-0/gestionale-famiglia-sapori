<?xml version="1.0" encoding="UTF-8"?>
 
<?import javafx.geometry.Insets?>
<?import javafx.scene.chart.PieChart?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.CheckBox?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.PasswordField?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.Spinner?>
<?import javafx.scene.control.SplitPane?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
 
<BorderPane prefHeight="720.0" prefWidth="1080.0" stylesheets="@../css/style.css" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="famiglia.sapori.controller.GestoreController">
 
    <top>
        <HBox alignment="CENTER_LEFT" spacing="20.0" styleClass="header-bar">
            <padding>
                <Insets bottom="15.0" left="20.0" right="20.0" top="15.0" />
            </padding>
            <Label styleClass="header-title" text="Pannello di Gestione" />
            <HBox HBox.hgrow="ALWAYS" />
            <Label fx:id="lblUtente" styleClass="user-label" text="Gestore: Admin" />
            <Button mnemonicParsing="false" onAction="#handleLogout" styleClass="logout-button" text="Logout" />
        </HBox>
    </top>
 
    <center>
        <TabPane fx:id="tabPaneGestore" styleClass="main-container" tabClosingPolicy="UNAVAILABLE">
            <tabs>
               
                <Tab text="Menu &amp; Prodotti">
                    <SplitPane dividerPositions="0.6" styleClass="dark-split-pane">
                        <VBox spacing="10.0" styleClass="panel-container">
                            <padding><Insets bottom="15" left="15" right="15" top="15" /></padding>
                            <Label styleClass="section-title" text="Listino Piatti" />
                            <TableView fx:id="tblMenu" VBox.vgrow="ALWAYS">
                                <columns>
                                    <TableColumn fx:id="colNomePiatto" prefWidth="150.0" text="Nome" />
                                    <TableColumn fx:id="colCategoriaPiatto" prefWidth="100.0" text="Categoria" />
                                    <TableColumn fx:id="colPrezzoPiatto" prefWidth="80.0" text="Prezzo" />
                                    <TableColumn fx:id="colDispPiatto" prefWidth="80.0" text="Disp." />
                                </columns>
                                <columnResizePolicy>
                                    <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                                </columnResizePolicy>
                            </TableView>
                        </VBox>
 
                        <VBox spacing="15.0" styleClass="panel-container">
                            <padding><Insets bottom="20" left="20" right="20" top="20" /></padding>
                            <Label styleClass="highlight-label" text="Dettagli Piatto" />
                           
                            <VBox spacing="5.0">
                                <Label styleClass="field-label" text="NOME PRODOTTO" />
                                <TextField fx:id="txtNomePiatto" promptText="Es. Carbonara" styleClass="input-field" />
                            </VBox>
                           
                            <HBox spacing="10.0">
                                <VBox spacing="5.0" HBox.hgrow="ALWAYS">
                                    <Label styleClass="field-label" text="CATEGORIA" />
                                    <ComboBox fx:id="comboCategoria" maxWidth="Infinity" styleClass="input-field" />
                                </VBox>
                                <VBox spacing="5.0">
                                    <Label styleClass="field-label" text="PREZZO (€)" />
                                    <TextField fx:id="txtPrezzoPiatto" prefWidth="80.0" promptText="0.00" styleClass="input-field" />
                                </VBox>
                            </HBox>
 
                            <VBox spacing="5.0">
                                <Label styleClass="field-label" text="DESCRIZIONE" />
                                <TextArea fx:id="txtDescrizionePiatto" prefHeight="60.0" styleClass="input-field" wrapText="true" />
                            </VBox>
 
                            <VBox spacing="5.0">
                                <Label styleClass="field-label" text="ALLERGENI" />
                                <TextField fx:id="txtAllergeni" promptText="Es. Glutine, Lattosio" styleClass="input-field" />
                            </VBox>
 
                            <CheckBox fx:id="chkDisponibile" selected="true" style="-fx-text-fill: white;" text="Disponibile per l'ordine" />
 
                            <Separator />
                           
                            <HBox alignment="CENTER_RIGHT" spacing="10.0">
                                <Button onAction="#handleNuovoPiatto" styleClass="secondary-button" text="Nuovo" />
                                <Button onAction="#handleEliminaPiatto" style="-fx-background-color: #c0392b; -fx-text-fill: white; -fx-font-weight: bold; -fx-cursor: hand;" text="Nascondi/Elimina" />
                                <Button onAction="#handleSalvaPiatto" styleClass="primary-button" text="Salva Modifiche" />
                            </HBox>
                        </VBox>
                    </SplitPane>
                </Tab>
 
                <Tab text="Personale (HR)">
                    <SplitPane dividerPositions="0.5" styleClass="dark-split-pane">
                        <VBox spacing="10.0" styleClass="panel-container">
                            <padding><Insets bottom="15" left="15" right="15" top="15" /></padding>
                            <Label styleClass="section-title" text="Elenco Dipendenti" />
                            <TableView fx:id="tblUtenti" VBox.vgrow="ALWAYS">
                                <columns>
                                    <TableColumn fx:id="colNomeUtente" prefWidth="150.0" text="Nome Completo" />
                                    <TableColumn fx:id="colUsername" prefWidth="100.0" text="Username" />
                                    <TableColumn fx:id="colRuolo" prefWidth="100.0" text="Ruolo" />
                                </columns>
                                <columnResizePolicy>
                                    <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                                </columnResizePolicy>
                            </TableView>
                        </VBox>
 
                        <VBox spacing="15.0" styleClass="panel-container">
                            <padding><Insets bottom="20" left="20" right="20" top="20" /></padding>
                            <Label styleClass="highlight-label" text="Gestione Dipendente" />
 
                            <VBox spacing="5.0">
                                <Label styleClass="field-label" text="NOME E COGNOME" />
                                <TextField fx:id="txtNomeUtente" styleClass="input-field" />
                            </VBox>
 
                            <VBox spacing="5.0">
                                <Label styleClass="field-label" text="USERNAME (Login)" />
                                <TextField fx:id="txtUsername" styleClass="input-field" />
                            </VBox>
 
                            <VBox spacing="5.0">
                                <Label styleClass="field-label" text="PASSWORD" />
                                <PasswordField fx:id="txtPassword" styleClass="input-field" />
                            </VBox>
 
                            <VBox spacing="5.0">
                                <Label styleClass="field-label" text="RUOLO" />
                                <ComboBox fx:id="comboRuolo" maxWidth="Infinity" styleClass="input-field" />
                            </VBox>
 
                            <Separator />
 
                            <HBox alignment="CENTER_RIGHT" spacing="10.0">
                                <Button onAction="#handleNuovoUtente" styleClass="secondary-button" text="Nuovo" />
                                <Button onAction="#handleEliminaUtente" style="-fx-background-color: #c0392b; -fx-text-fill: white; -fx-font-weight: bold; -fx-cursor: hand;" text="Licenzia/Elimina" />
                                <Button onAction="#handleSalvaUtente" styleClass="primary-button" text="Salva Utente" />
                            </HBox>
                        </VBox>
                    </SplitPane>
                </Tab>
 
                <Tab text="Configurazione Sala">
                    <SplitPane dividerPositions="0.5" styleClass="dark-split-pane">
                        <VBox spacing="10.0" styleClass="panel-container">
                            <padding><Insets bottom="15" left="15" right="15" top="15" /></padding>
                            <Label styleClass="section-title" text="Tavoli Esistenti" />
                            <TableView fx:id="tblTavoli" VBox.vgrow="ALWAYS">
                                <columns>
                                    <TableColumn fx:id="colNumeroTavolo" prefWidth="75.0" text="Numero" />
                                    <TableColumn fx:id="colPostiTavolo" prefWidth="75.0" text="Posti" />
                                    <TableColumn fx:id="colStatoTavolo" prefWidth="100.0" text="Stato Attuale" />
                                </columns>
                                <columnResizePolicy>
                                    <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                                </columnResizePolicy>
                            </TableView>
                        </VBox>
 
                        <VBox spacing="15.0" styleClass="panel-container">
                            <padding><Insets bottom="20" left="20" right="20" top="20" /></padding>
                            <Label styleClass="highlight-label" text="Modifica Tavolo" />
 
                            <HBox spacing="10.0">
                                <VBox spacing="5.0">
                                    <Label styleClass="field-label" text="NUMERO" />
                                    <TextField fx:id="txtNumeroTavolo" prefWidth="80.0" styleClass="input-field" />
                                </VBox>
                                <VBox spacing="5.0">
                                    <Label styleClass="field-label" text="POSTI" />
                                    <Spinner fx:id="spinPostiTavolo" prefWidth="80.0" styleClass="input-field" />
                                </VBox>
                            </HBox>
 
                            <VBox spacing="5.0">
                                <Label styleClass="field-label" text="NOTE (Opzionale)" />
                                <TextArea fx:id="txtNoteTavolo" prefHeight="60.0" styleClass="input-field" />
                            </VBox>
                           
                            <Button maxWidth="Infinity" onAction="#handleResetTavolo" styleClass="orange-button" text="FORZA STATO A 'LIBERO'" />
                            <Label style="-fx-text-fill: #bdc3c7; -fx-font-size: 10px;" text="Usa solo se il sistema si blocca o per errori." wrapText="true" />
 
                            <Separator />
 
                            <HBox alignment="CENTER_RIGHT" spacing="10.0">
                                <Button onAction="#handleNuovoTavolo" styleClass="secondary-button" text="Nuovo" />
                                <Button onAction="#handleEliminaTavolo" style="-fx-background-color: #c0392b; -fx-text-fill: white; -fx-font-weight: bold; -fx-cursor: hand;" text="Elimina" />
                                <Button onAction="#handleSalvaTavolo" styleClass="primary-button" text="Salva Tavolo" />
                            </HBox>
                        </VBox>
                    </SplitPane>
                </Tab>
 
                <Tab text="Statistiche">
                    <HBox alignment="CENTER" spacing="20.0" styleClass="panel-container">
                        <padding><Insets bottom="20" left="20" right="20" top="20" /></padding>
                       
                        <VBox alignment="CENTER" spacing="10.0" HBox.hgrow="ALWAYS">
                            <Label styleClass="section-title" text="Piatti Più Venduti" />
                            <PieChart fx:id="pieBestSellers" labelsVisible="true" legendSide="RIGHT" style="-fx-text-fill: white;" />
                        </VBox>
                       
                        <Separator orientation="VERTICAL" />
                       
                        <VBox alignment="CENTER" minWidth="250.0" spacing="20.0">
                            <Label styleClass="highlight-label" text="Riepilogo Incassi" />
                           
                            <VBox alignment="CENTER" spacing="5.0" style="-fx-background-color: #34495e; -fx-padding: 20; -fx-background-radius: 10;">
                                <Label style="-fx-text-fill: #bdc3c7; -fx-font-size: 14px;" text="INCASSO GIORNALIERO" />
                                <Label fx:id="lblIncassoTotale" style="-fx-text-fill: #2ecc71; -fx-font-size: 32px; -fx-font-weight: bold;" text="€ 0.00" />
                            </VBox>
                           
                            <Button onAction="#handleRefreshStats" styleClass="secondary-button" text="Aggiorna Dati" />
                        </VBox>
                    </HBox>
                </Tab>
 
            </tabs>
        </TabPane>
    </center>
 
</BorderPane>